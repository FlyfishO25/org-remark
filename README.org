[[file:https://img.shields.io/badge/License-GPLv3-blue.svg]]

#+title: README: Org-remark

* ❦❦❦ IMPORTANT NOTICE ❦❦❦

[This notice written on 18 January 2022]

Happy 2022!

I have changed the name of the project and package to "*Org-remark*" from Org-marginalia. 

If you are using Org-marginalia now, there are breaking changes. This package includes the feature that automatically converts the old Org-marginalia data into the new Org-remark data. Add ~org-remark-convert-legacy~ feature like this:

#+begin_src elisp
  (require 'org-remark-convert-legacy)
#+end_src

This feature is designed to work automatically and transparently to you, meaning you should not have to do anything, as long as you did not customize ~org-marginala-notes-file-path~. If you did, you also need to customize ~org-remark-notes-file-path~. You can also manually do data conversion if you wish. For more detail, refer to the docstring of function ~org-remark-convert-legacy-data~. 

* Intorduction

Org-remark lets you highlight and annotate any text file with using Org mode.

A complete [[https://nobiot.github.io/org-remark/][user manual]] is available online (Info file will be added when Org-remark is added to ELPA/MELPA).

For installation and minimum configuration, refer to [[#installation][Installation]] below or the corresponding section in the user manual.

[[https://nobiot.github.io/org-remark/#getting-started][Getting Started]] in the user manual will get you started in 5 minutes.

[[./resources/images/2020-12-24T101116_Title.png]]
*Figure 1*. Left: Org-mode with text enlarged; Right marginal notes with the inline image display on

* Screenshots

Refer to the screenshots below for a teaser of  what it can do.

#+begin_quote
The screen shots are from the old Org-marginalia. They are still relevant but new screen shots are on their way.
#+end_quote

[[./resources/images/2020-12-22T141331-OM-screen-shot-01.png]]
*Figure 2*. Left: main note with some text highlighted in green; Right: marginal notes in a marginalia file

[[./resources/images/2021-08-17T220032.png]]
*Figure 3*. Left: ~org-roam-buffer~ showing backlinks from the marginal notes; Right: main Org note. Org-remark can automatically add links with Org-ID from marginal notes back to the main file. This works well with Org-roam's backlinks

[[./resources/images/2020-12-22T141331-OM-screen-shot-03.png]]
*Figure 4*. Main note can be any text files. Left: an ~.el~ file with a highlight; Right: marginal notes file

* Installation
:PROPERTIES:
:CUSTOM_ID: installation
:END:

This package is not available on ELPA or MELPA yet. Manual installation is required.

Ensure to have Org Mode 9.4 or later (tested on 9.4.2). This package uses ~org-collect-keywords~, which does not exist in an earlier version.

Store all the =.el= files in the repo in your load-path and put this in your
init file:

#+begin_src emacs-lisp
  ;; Set `load-path' , load `org-remark-global-tracking', and turn it on for
  ;; automatic loading of highlights for the files tracked
  (add-to-list 'load-path "~/local-repos/org-remark")
  (require 'org-remark-global-tracking)
  (org-remark-global-tracking-mode +1)
#+end_src

Unless you explicitly load =org= during Emacs initialization, I suggest to defer loading =org-remark= (thus there is no =(require 'org-remark)= in the example above). This is because it will also pull in =org=, which can slow down initialization. By autoloading some commands in similar ways as the example keybindings below, you can control the timing of loading =org-remark=. 

Below are example keybindings you might like to consider:

#+begin_src emacs-lisp
  ;; Key-bind `org-remark-mark' to global-map so that you can call it globally
  ;; before the library is loaded.  In order to make `org-remark-mark' and
  ;; `org-remark-mode' callable, use `autoload'.
  (autoload #'org-remark-mark "org-remark" nil t)
  (autoload #'org-remark-mode "org-remark" nil t)
  (define-key global-map (kbd "C-c n m") #'org-remark-mark)

  ;; The rest of keybidings are done only on loading `org-remark'
  (with-eval-after-load 'org-remark
    (define-key org-remark-mode-map (kbd "C-c n o") #'org-remark-open)
    (define-key org-remark-mode-map (kbd "C-c n ]") #'org-remark-view-next)
    (define-key org-remark-mode-map (kbd "C-c n [") #'org-remark-view-prev)
    (define-key org-remark-mode-map (kbd "C-c n r") #'org-remark-remove))
#+end_src

* Contributing
To be added

* Feedback

Feedback welcome in this repo, or in [[https://org-roam.discourse.group/t/prototype-org-marginalia-write-margin-notes-with-org-mode/1080][Org-roam Discourse forum]]. 

*Edit*: Now the features 1 & 2 have been implemented... I want to add a little more, to attend to the known limitations to see if I can remove some of them.

I am aiming to keep this package to be small and focused. I plan to add the following features, and probably consider it to be feature complete for my purposes.

1. DONE v0.0.3  =om/toggle= to toggle show/hide of highlights without losing them
2. DONE =om/next= and =om/prev= to easily navigate highlighted regions in the buffer
     This is done (v0.0.2), but I would like to try a transient (don't want to repeat the prefix everytime): transient done with v0.0.4.
   
* License

This work is licensed under a GPLv3 license. For a full copy of the licese, refer to [[./LICENSE][LICENSE]].

* Local Variables

# Local Variables:
# eval: (require 'org-make-toc)
# before-save-hook: org-make-toc
# org-export-with-properties: ()
# org-export-with-title: t
# line-spacing: 4
# End:

* org-remark
:PROPERTIES:
:org-remark-file: ~/src/org-remark/org-remark.el
:END:

** defun
:PROPERTIES:
:CATEGORY: correction
:END:
[[file:~/src/org-remark/org-remark.el::211][org-remark]]
